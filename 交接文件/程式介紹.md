# ERP

python環境python 3.11以上 

系統主要分成兩個app，一個為Backend，一個為Frontend

Backend主要處理後端與model的資料溝通。

Frontend主要用來顯示頁面，View中處理顯示的資訊

## 伺服器帳號

管理員帳號/密碼

    admin/admin

已存在用戶

    employee_id/身分證

## Daphne 託管

系統採用Daphne託管

    設定檔:asgi.py
    daphne ERP.asgi:application

用來支援同時連線的請求，不支援熱加載，**有code變動需重啟!!!**


    asgi需要先處理靜態檔案
    python manage.py collectstatic


## 資料庫

因還未上架到AWS，目前仍使用sqlite，但因為採用**ORM架構**，裡面的SQL是不用更改的。

## Backend 

### model
細節

#### Employee
紀錄員工

#### 簽核相關model

1. Approval_Target
處理每項簽核的設定

2. ApprovalModel
創練簽核時會根據Approval_Target建立一份ApprovalModel

3. ApprovalLog
簽ApprovalModel時紀錄資訊的Model


### setting_ReferenceTable.py
在系統設計時初始化的資料記錄

### salary_utils.py

計算個人薪資用的檔案
大部分的相關金額的計算都會在Model完成，如:Miss_Food_Application model 有一個cal_months，是計算當月的誤餐費用

### context_processors.py

透過在ERP\settings.py 的TEMPLATES的context_processors設定，可直接在HTML 呼叫fun

```python=
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.
        'OPTIONS': {
            'context_processors': [
                ...
                'Backend.context_processors.sys_messages',  
                'Backend.context_processors.client_list',  
                'Backend.context_processors.approval_count',  
                'Backend.context_processors.pass_test_func',  
            ],
        },
    },
]

```

### utils.py

將部分可重複利用的coed從view移動到utils.py裡

## Frontend 

### static\js\fuc\

此資料夾大多為系統在每個頁面共用使用到的JS檔

### restful.js

提供各頁get、post、put、delete的API與檔案發送的檔案

### LoadSelect.js

讀取資料時，觸發此js得fun來設定Select選項的選中的資料

### custom_tags.py

自訂的jinja2 fun
